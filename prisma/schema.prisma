generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model company {
  id              Int               @id @default(autoincrement())
  name            String            @db.VarChar(255)
  website         String?           @db.VarChar(255)
  user_id         Int?
  created_date    DateTime?         @default(now()) @db.DateTime(0)
  tags            String?           @db.VarChar(255)
  categories      String?           @db.VarChar(255)
  industries      String?           @db.VarChar(255)
  user            user?             @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "company_ibfk_1")
  company_history company_history[]
  company_news    company_news[]
  lead            lead[]

  @@index([user_id], map: "user_id")
}

model company_history {
  id           Int       @id @default(autoincrement())
  company_id   Int?
  user_id      Int?
  created_date DateTime? @default(now()) @db.DateTime(0)
  detail       String?   @db.Text
  company      company?  @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "company_history_ibfk_1")
  user         user?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "company_history_ibfk_2")

  @@index([company_id], map: "company_id")
  @@index([user_id], map: "user_id")
}

model company_news {
  id         Int      @id @default(autoincrement())
  news_id    Int?
  company_id Int?
  news       news?    @relation(fields: [news_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "company_news_ibfk_1")
  company    company? @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "company_news_ibfk_2")

  @@index([company_id], map: "company_id")
  @@index([news_id], map: "news_id")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model definition {
  id          Int       @id @default(autoincrement())
  create_time DateTime? @db.DateTime(0)
  name        String?   @db.VarChar(255)
  value       String?   @db.VarChar(1000)
}

model lead {
  id           Int       @id @default(autoincrement())
  company_id   Int?
  created_date DateTime? @default(now()) @db.DateTime(0)
  user_id      Int?
  note         String?   @db.Text
  source_id    Int?
  company      company?  @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lead_ibfk_1")
  user         user?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "lead_ibfk_2")

  @@index([company_id], map: "company_id")
  @@index([source_id], map: "source_id")
  @@index([user_id], map: "user_id")
}

model news {
  id             Int            @id @default(autoincrement())
  published_date DateTime?      @db.DateTime(0)
  news_source_id Int?
  url            String?        @db.VarChar(2048)
  content        String?        @db.Text
  time_stamp     DateTime?      @db.DateTime(0)
  author         String?        @db.VarChar(255)
  header         String?        @db.Text
  company_news   company_news[]
  news_source    news_source?   @relation(fields: [news_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "news_ibfk_1")
  training       training[]

  @@index([news_source_id], map: "source_id")
}

model news_source {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)
  news news[]
}

model task {
  id            Int          @id @default(autoincrement())
  short_list_id Int?
  status        task_status?
  due_date      DateTime?    @db.DateTime(0)
  user_id       Int?
  user          user?        @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "task_ibfk_2")

  @@index([short_list_id], map: "short_list_id")
  @@index([user_id], map: "user_id")
}

model training {
  id           Int              @id @default(autoincrement())
  news_id      Int?
  result       training_result?
  category_id  Int?
  user_id      Int?
  created_date DateTime?        @default(now()) @db.DateTime(0)
  news         news?            @relation(fields: [news_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "training_ibfk_1")
  user         user?            @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "training_ibfk_3")

  @@index([category_id], map: "category_id")
  @@index([news_id], map: "news_id")
  @@index([user_id], map: "user_id")
}

model training_target {
  id           Int       @default(autoincrement())
  user_id      Int
  created_date DateTime? @default(now()) @db.DateTime(0)
  detail       String?   @db.Text
  user         user      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "training_target_ibfk_1")

  @@id([id, user_id])
  @@index([user_id], map: "user_id")
}

model user {
  id              Int               @id @default(autoincrement())
  name            String            @db.VarChar(255)
  created_date    DateTime?         @default(now()) @db.DateTime(0)
  password_hash   String            @db.VarChar(255)
  role            String?           @db.VarChar(50)
  company         company[]
  company_history company_history[]
  lead            lead[]
  task            task[]
  training        training[]
  training_target training_target[]
}

enum task_status {
  pending
  in_progress
  completed
  blocked
}

enum training_result {
  like
  unlike
  pass
}
